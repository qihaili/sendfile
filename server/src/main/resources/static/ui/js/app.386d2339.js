(function(e){function t(t){for(var s,o,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)o=i[d],n[o]&&p.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/ui/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("64a9"),n=a.n(s);n.a},"41f3":function(e,t,a){"use strict";var s=a("bd16"),n=a.n(s);n.a},4805:function(e,t,a){"use strict";var s=a("897e"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    For a guide and recipes on how to configure / customize this project,"),a("br"),e._v("\n    check out the\n    "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],l={name:"HelloWorld",props:{msg:String}},c=l,u=(a("4805"),a("2877")),d=Object(u["a"])(c,o,i,!1,null,"b9167eee",null),p=d.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isChooseUpload?a("el-card",{staticClass:"mycard",staticStyle:{height:"430px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      上传文件\n    ")]),e.isChooseUpload&&!e.isChooseDownload?a("div",[a("el-progress",{attrs:{type:"circle",percentage:e.uploadPercentage,status:e.uploadStatus}}),a("div",{staticStyle:{height:"20px","line-height":"20px"}},[a("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e.speed))])]),null!=e.share?a("div",{staticStyle:{"text-align":"left"}},[e.shareTTL?a("span",{staticStyle:{"font-size":"14px"}},[e._v("文件将在"+e._s(e.shareTTL)+"天后过期")]):e._e(),a("div",{staticStyle:{margin:"20px 5px"}},[a("span",[e._v("提取地址：")]),a("el-input",{attrs:{value:e.address}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.address,expression:"address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{slot:"append",type:"primary",size:"mini"},slot:"append"},[e._v("复制地址")])],1),a("span",{staticStyle:{"font-size":"12px"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"5px"}}),e._v("拷贝地址，粘贴到浏览器地址栏中，并打开页面")])],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-link",{attrs:{type:"primary"},on:{click:e.backToHome}},[e._v("再次上传")])],1)]):a("div",{staticStyle:{margin:"50px 5px"}},[a("span",[e._v("等待上传成功，生成提取码。。。")])])],1):a("div",[a("el-upload",{attrs:{drag:"",action:"/api/files/upload","show-file-list":!1,"before-upload":e.chooseUpload,"before-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError,"on-progress":e.showProgress}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("可上传"),e.maxFileSize>0?a("span",[e._v(e._s(this.maxFileSize)+"MB")]):a("span",[e._v("任意大小")]),e._v("的文件。"),e.shareTTL>0?a("span",[e._v("有效期"+e._s(this.shareTTL)+"天")]):a("span",[e._v("永久有效")])])])],1)]):e._e(),e.uploadedList.length>0?a("el-card",{staticClass:"mycard"},[a("div",e._l(e.uploadedList,function(t){return a("el-card",{key:t.id,staticStyle:{margin:"10px 0px"}},[a("files",{attrs:{share:t,"on-removed":e.shareRemoved,deletable:!0}})],1)}),1)]):e._e()],1)},v=[],f=(a("ac4d"),a("8a81"),a("ac6a"),a("c5f6"),a("bc3a")),g=a.n(f),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.share.files,function(t,s){return a("el-row",{key:s},[a("div",{staticStyle:{display:"inline-block",float:"left"}},[a("el-link",{staticStyle:{"vertical-align":"middle","font-size":"14px",margin:"0px"},attrs:{href:"/api/files/"+e.share.id+"/"+t.name,icon:"el-icon-document"}},[a("div",{staticStyle:{"max-width":"290px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[e._v(e._s(t.name))])])],1),a("div",{staticStyle:{display:"inline-block",float:"right"}},[a("span",{staticStyle:{"vertical-align":"middle","font-size":"12px"}},[e._v(e._s(e.humanReadableDataSize(t.size)))])])])}),a("div",{staticClass:"el-divider el-divider--horizontal",staticStyle:{margin:"10px 0px"}}),a("el-row",[a("div",{staticStyle:{display:"inline-block",float:"left"}},[e.share.ttl?a("span",{staticStyle:{"vertical-align":"middle","font-size":"12px"}},[e._v("文件将于 "+e._s(e.humanreadableDuration(e.share.ttl))+" 过期")]):e._e()]),a("div",{staticStyle:{display:"inline-block",float:"right"}},[a("el-tooltip",{attrs:{content:"复制链接",placement:"top"}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.address,expression:"address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{size:"mini",icon:"el-icon-document-copy"}})],1),e.deletable?a("el-tooltip",{attrs:{content:"删除文件",placement:"top"}},[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",loading:e.deleteLoading},on:{click:e.deleteShare}})],1):e._e()],1)])],2)},_=[],y=a("5118"),b={props:{share:{type:Object},deletable:{type:Boolean,default:!1},onRemoved:{type:Function,required:!0}},data:function(){return{address:window.location.href+("/"==this.$route.path?this.share.id:""),syncSharePolling:null,countdown:null,deleteLoading:!1}},created:function(){this.syncShare(),this.syncSharePolling=Object(y["setInterval"])(this.syncShare,12e4)},destroyed:function(){Object(y["clearInterval"])(this.syncSharePolling)},methods:{onCopySuccess:function(e){this.$message.success("地址已复制")},syncShare:function(){var e=this;Object(y["clearInterval"])(this.countdown),g.a.get("/api/files/".concat(this.share.id)).then(function(t){e.share.ttl=t.data.ttl,e.share.files=t.data.files,e.countdown=Object(y["setInterval"])(e.refreshTtl,1e4)}).catch(function(t){404==t.response.status?e.onRemoved(e.share):e.$message.error({message:"<p>"+t.response.status+"-"+t.response.statusText+"</p><p>"+t.response.data+"</p>",dangerouslyUseHTMLString:!0})})},refreshTtl:function(){this.share.ttl-=1e4},deleteShare:function(){var e=this;this.deleteLoading=!0,this.$confirm("确定删除文件共享？",{type:"warning"}).then(function(){g.a.delete("/api/files/".concat(e.share.id),{headers:{token:e.share.token}}).then(function(t){e.onRemoved(e.share)}).finally(function(t){e.deleteLoading=!1})}).catch(function(){}).finally(function(){e.deleteLoading=!1})},humanReadableDataSize:function(e){var t;return t=e>1099511627776?(e/1099511627776).toFixed(1)+"TB":e>1073741824?(e/1073741824).toFixed(1)+"GB":e>1048576?(e/1048576).toFixed(1)+"MB":e>1024?(e/1024).toFixed(1)+"KB":e.toFixed(0)+"Bytes",t},humanreadableDuration:function(e){var t="";return e>864e5&&(t+=parseInt(e/864e5)+"天",e%=864e5),e>36e5&&(t+=parseInt(e/36e5)+"小时",e%=36e5),e>6e4&&(t+=parseInt(e/6e4)+"分钟"),""==t?t="1分钟内":t+="后",t}}},S=b,x=Object(u["a"])(S,m,_,!1,null,null,null),w=x.exports,k={components:{files:w},data:function(){return{isSuccess:!1,isChooseUpload:!0,isChooseDownload:!0,share:null,uploadPercentage:0,uploadStatus:null,speed:null,lastLoaded:0,lastLoadTime:null,shareTTL:null,maxFileSize:null,uploadedList:null==localStorage.getItem("uploaded")?[]:JSON.parse(localStorage.getItem("uploaded"))}},computed:{address:function(){return window.location.href+this.share.id}},created:function(){var e=this;g.a.get("/api/config").then(function(t){e.shareTTL=t.data.shareTTL,e.maxFileSize=t.data.maxFileSize}).catch(function(t){console.log(t.response),e.$message.error({message:"<p>"+t.response.status+"-"+t.response.statusText+"</p><p>"+t.response.data+"</p>",dangerouslyUseHTMLString:!0})})},methods:{handleSuccess:function(e){this.$message.success("上传成功"),this.isSuccess=!0,this.share=e,this.uploadStatus="success",this.speed=null,this.uploadedList.unshift(this.share),this.save()},handleError:function(e){var t=JSON.parse(e.message);this.$message.error("上传失败。"+t.message),this.uploadStatus="exception"},showProgress:function(e){this.uploadPercentage=Number(e.percent.toFixed(0));var t=(new Date).getTime(),a=(t-this.lastLoadTime)/1e3;if(a>1){var s=e.loaded-this.lastLoaded;this.lastLoaded=e.loaded,this.lastLoadTime=t;var n=s/a;this.speed=n>1073741824?(n/1073741824).toFixed(1)+" GB/s":n>1048576?(n/1048576).toFixed(1)+" MB/s":n>1024?(n/1024).toFixed(1)+" KB/s":n.toFixed(0)+" B/s"}},handleRemove:function(){return!1},chooseUpload:function(e){if(this.maxFileSize>0&&e.size>1024*this.maxFileSize*1024)return this.$message.error("文件过大，不能超过"+this.maxFileSize+"MB"),!1;this.isChooseUpload=!0,this.isChooseDownload=!1,this.lastLoadTime=(new Date).getTime()},showFiles:function(e){this.$router.push("/".concat(e))},onCopySuccess:function(e){this.$message.success("地址已复制")},backToHome:function(){this.isChooseUpload=!0,this.isChooseDownload=!0},shareRemoved:function(e){for(var t=-1,a=0;a<this.uploadedList.length;a++){var s=this.uploadedList[a];if(s.id==e.id){t=a;break}}t>-1&&(this.uploadedList.splice(t,1),this.save())},save:function(){var e=JSON.parse(JSON.stringify(this.uploadedList)),t=!0,a=!1,s=void 0;try{for(var n,r=e[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;o.ttl=null}}catch(i){a=!0,s=i}finally{try{t||null==r.return||r.return()}finally{if(a)throw s}}localStorage.setItem("uploaded",JSON.stringify(e))}}},T=k,j=(a("41f3"),Object(u["a"])(T,h,v,!1,null,null,null)),L=j.exports,C={name:"app",components:{HelloWorld:p,Upload:L}},O=C,z=(a("034f"),Object(u["a"])(O,n,r,!1,null,null,null)),F=z.exports,$=a("8c4f"),P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"400px",height:"400px",display:"inline-block"}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n    文件（点击文件名下载）\n  ")]),e.loading?a("div",[a("p",[e._v("正在读取文件...")])]):a("div",[e.response?a("files",{attrs:{share:e.response,"on-removed":e.shareRemoved}}):a("div",[a("p",[e._v(e._s(e.errorMsg))])])],1)])},I=[],M={components:{files:w},data:function(){return{response:null,loading:!0,errorMsg:null}},methods:{shareRemoved:function(e){this.errorMsg="文件已过期",this.response=null}},created:function(){console.log(this.$route);var e=this;g.a.get("/api/files/".concat(this.$route.params.shareId)).then(function(t){e.response=t.data},function(t){e.errorMsg=t.response.data.message}).finally(function(){e.loading=!1})}},E=M,B=Object(u["a"])(E,P,I,!1,null,null,null),N=B.exports;s["default"].use($["a"]);var D=new $["a"]({routes:[{path:"/",component:L},{path:"/:shareId",component:N}]}),R=a("4eb5"),U=a.n(R),J=a("5c96"),H=a.n(J);a("0fae");s["default"].config.productionTip=!1,s["default"].use(H.a),s["default"].use(U.a),new s["default"]({router:D,render:function(e){return e(F)}}).$mount("#app")},"64a9":function(e,t,a){},"897e":function(e,t,a){},bd16:function(e,t,a){}});
//# sourceMappingURL=app.386d2339.js.map