(function(e){function t(t){for(var s,o,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)o=r[u],n[o]&&p.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},i=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/ui/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("64a9"),n=a.n(s);n.a},"27d7":function(e,t,a){"use strict";var s=a("49b2"),n=a.n(s);n.a},"2b21":function(e,t,a){"use strict";var s=a("e145"),n=a.n(s);n.a},"3fab":function(e,t,a){"use strict";a.r(t),a.d(t,"msg",function(){return s});var s={languageName:"English",logout:"Logout",upload:{dragFile:{1:"Drag files here, or ",2:"click to add"},tip:{normal:"Can upload {size} files",anySize:"Can upload any size files"},expire:"Expires after",enablePassword:"Enable password",uploadButton:"Upload",cancel:"Cancel"},uploaded:{downloadLink:"Download link：",copyLinkButton:"Copy",tip:"Copy link and open in browser.",backToHomeLink:"Upload again"},message:{uploading:"Uploading. Will generate download link after success.",uploadSuccess:"Upload success",uploadFail:"Upload failed. {errMsg}",fileTooBig:"File is too big, cannot exceed {size}",linkCopied:"Link copied"},expireTip:{normal:"Files will expire after {ttl}",neverExpire:"Files will never expire."},durationUnit:{day:"d ",hour:"h ",minute:"m ",D:" Day(s)",H:" Hour(s)",M:" Minute(s)"},download:{title:"File (click file name to download)",needPassword:"Files are encrypted, please input password",unlockButton:"Unlock",gotoUploadLink:"Use SendFile to share files",fileExpired:"Files are expired",wrongPassword:"Wront password"},files:{copyLink:"Copy link",copyPassword:"Copy password",deleteFile:"Delete files",linkCopied:"Link copied",passwordCopied:"Password copied",confirmDelete:"You are going to delete these files. Are you sure?",okButton:"OK",cancelButton:"Cancel"},admin:{authenticateButton:"Login",inputPasswordPrompt:"Please input admin password"}}},"41f3":function(e,t,a){"use strict";var s=a("bd16"),n=a.n(s);n.a},"49b2":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-row",[a("div",[a("i",{staticClass:"el-icon-s-promotion",staticStyle:{"margin-right":"1rem","font-size":"4rem",color:"#409EFF","vertical-align":"middle"}}),a("span",{staticStyle:{"font-size":"2.5rem","font-weight":"bold",color:"#606266","vertical-align":"middle"}},[e._v("Send File")])]),a("div",{staticStyle:{"line-height":"40px",margin:"0.5rem"}},[a("el-dropdown",{staticClass:"header-element",on:{command:e.changeLang}},[a("span",{staticStyle:{cursor:"pointer"}},[e._v("\n        "+e._s(e.$t("msg.languageName"))),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.$i18n.messages,function(t,s){return a("el-dropdown-item",{key:s,attrs:{command:s,disabled:e.$i18n.locale==s}},[e._v(e._s(t.msg.languageName))])}),1)],1),this.$root.adminLoggedIn?a("el-button",{staticClass:"header-element",attrs:{type:"text"},on:{click:e.logout}},[e._v("\n        "+e._s(e.$t("msg.logout"))+"\n      ")]):e._e()],1)]),a("router-view")],1)},i=[],o=a("bc3a"),r=a.n(o),l={name:"app",methods:{changeLang:function(e){this.$i18n.locale=e},logout:function(){var e=this;r.a.post("/api/logout").then(function(){e.$root.adminLoggedIn=!1})}}},c=l,d=(a("034f"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,null,null),p=u.exports,h=a("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mycard2-upload"},[e.errorMsg?a("div",[a("el-row",{staticStyle:{height:"450px",width:"100%",display:"table","text-align":"center"}},[a("p",{staticStyle:{display:"table-cell","vertical-align":"middle",color:"#F56C6C","font-size":"1rem"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"5px"}}),e.errorMsg.msg?a("span",[e._v(e._s(e.$t(e.errorMsg.msg)))]):a("span",[e._v(e._s(e.errorMsg))])])]),a("el-row",{staticStyle:{"text-align":"center",width:"100%"}},[a("el-link",{attrs:{type:"primary",icon:"el-icon-s-home"},on:{click:e.backToHome}},[e._v(e._s(e.$t("msg.uploaded.backToHomeLink")))])],1)],1):e.isChooseUpload?a("div",[a("el-progress",{staticStyle:{"margin-top":"20px"},attrs:{type:"circle","stroke-width":18,percentage:e.uploadPercentage,status:e.uploadStatus}}),a("div",{staticStyle:{height:"20px","line-height":"20px"}},[a("span",{staticStyle:{"font-size":"small"}},[e._v(e._s(e.speed))])]),e.share?a("div",{staticStyle:{"text-align":"left",position:"relative",height:"280px"}},[e.config?a("span",{staticStyle:{"font-size":"small"}},[a("humanReadableDuration",{attrs:{ttl:this.share.ttl}})],1):e._e(),a("div",{staticStyle:{margin:"20px 5px"}},[a("el-row",[e._v(e._s(e.$t("msg.uploaded.downloadLink")))]),a("el-input",{attrs:{value:e.address}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.address,expression:"address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{slot:"append",type:"primary",size:"mini"},slot:"append"},[e._v(e._s(e.$t("msg.uploaded.copyLinkButton")))])],1),a("el-row",{staticStyle:{"font-size":"small"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"5px"}}),e._v(e._s(e.$t("msg.uploaded.tip")))])],1),a("div",{staticStyle:{position:"absolute",bottom:"0px","text-align":"center",width:"100%"}},[a("el-link",{attrs:{type:"primary",icon:"el-icon-s-home"},on:{click:e.backToHome}},[e._v(e._s(e.$t("msg.uploaded.backToHomeLink")))])],1)]):a("div",{staticStyle:{margin:"50px 5px"}},[a("span",[e._v(e._s(e.$t("msg.message.uploading")))]),a("el-row",[a("el-button",{staticStyle:{"margin-top":"20px"},on:{click:e.cancelUpload}},[e._v(e._s(e.$t("msg.upload.cancel")))])],1)],1)],1):a("div",{staticClass:"upload-panel"},[a("el-upload",{ref:"upload",staticClass:"upload-component",attrs:{drag:"",action:"","show-file-list":!0,"auto-upload":!1,multiple:!0,"on-change":e.onChange}},[a("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"3.7rem",color:"#C0C4CC",margin:"2rem 0 1.5rem","line-height":"50px"}}),a("div",{staticClass:"el-upload__text",staticStyle:{"font-size":"1rem"}},[e._v(e._s(e.$t("msg.upload.dragFile.1"))),a("em",[e._v(e._s(e.$t("msg.upload.dragFile.2")))])]),e.config?a("div",{staticClass:"el-upload__tip",staticStyle:{"text-align":"center"},attrs:{slot:"tip"},slot:"tip"},[e.config.share.maxFileSize.startsWith("-1")?a("span",[e._v(e._s(e.$t("msg.upload.tip.anySize")))]):a("span",[e._v(e._s(e.$t("msg.upload.tip.normal",{size:this.config.share.maxFileSize})))])]):e._e()]),a("el-row",{staticStyle:{"margin-top":"5px","line-height":"42px"}},["en-US"==e.$i18n.locale?a("span",{staticStyle:{color:"#606266","font-size":"medium"}},[e._v(e._s(e.$t("msg.upload.expire")))]):e._e(),e.config?a("el-select",{staticStyle:{width:"150px",margin:"0px 10px 0px 10px"},model:{value:e.ttl,callback:function(t){e.ttl=t},expression:"ttl"}},e._l(e.config.share.ttlOptions,function(t,s){return a("el-option",{key:s,attrs:{label:t.value.slice(0,t.value.length-1)+e.$t("msg.durationUnit."+t.value.charAt(t.value.length-1)),value:t.value}})}),1):e._e(),"zh-CN"==e.$i18n.locale?a("span",{staticStyle:{color:"#606266","font-size":"medium"}},[e._v(e._s(e.$t("msg.upload.expire")))]):e._e()],1),a("el-row",{staticStyle:{"margin-top":"5px","line-height":"42px"}},[a("el-checkbox",{model:{value:e.passwordEnabled,callback:function(t){e.passwordEnabled=t},expression:"passwordEnabled"}},[e._v(e._s(e.$t("msg.upload.enablePassword")))]),e.passwordEnabled?a("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{autofocus:"",type:e.showPassword?"text":"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[a("i",{class:"el-input__icon iconfont "+(e.showPassword?"icon-eye-open":"icon-eye-close"),staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function(t){e.showPassword=!e.showPassword}},slot:"suffix"})]):e._e()],1),a("el-button",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{type:"primary",icon:"el-icon-upload",disabled:null===e.fileList||0==e.fileList.length},on:{click:e.submitUpload}},[e._v(e._s(e.$t("msg.upload.uploadButton")))])],1)]),a("transition",[e.uploadedList&&e.uploadedList.length>0?a("div",{staticClass:"mycard2"},[a("transition-group",{attrs:{name:"list"}},e._l(e.uploadedList,function(t){return a("el-card",{key:t.id,staticStyle:{margin:"10px 0px","box-shadow":"0 2px 6px 0 rgba(0, 0, 0, 0.1)"}},[a("files",{attrs:{share:t,"on-removed":e.shareRemoved}})],1)}),1)],1):e._e()])],1)},m=[],f=a("7618"),v=(a("ac4d"),a("8a81"),a("ac6a"),a("96cf"),a("3b8d")),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.share.files?a("table",{staticStyle:{width:"100%"}},e._l(e.share.files,function(t,s){return a("tr",{key:s},[e._m(0,!0),a("td",{attrs:{"min-width":"200",align:"left"}},[a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("el-link",{staticStyle:{"vertical-align":"middle",margin:"0px","font-size":"1rem"},attrs:{href:"/api/shares/"+e.share.id+"/"+t.name}},[a("div",{staticStyle:{"text-align":"left","word-break":"break-all"}},[e._v(e._s(t.name))])])],1)],1),a("td",{attrs:{width:"55",align:"right"}},[a("span",{staticStyle:{"vertical-align":"middle","font-size":"0.8rem"}},[e._v(e._s(e.humanReadableDataSize(t.size)))])])])}),0):e._e(),a("div",{staticClass:"el-divider el-divider--horizontal",staticStyle:{margin:"10px 0px"}}),a("el-row",[a("div",{staticStyle:{display:"inline-block",float:"left","text-align":"left"}},[a("el-row",[a("span",{staticStyle:{"vertical-align":"middle","font-size":"0.8rem"}},[a("humanReadableDuration",{attrs:{ttl:this.share.ttl}})],1)])],1),a("div",{staticStyle:{display:"inline-block",float:"right"}},[a("el-tooltip",{attrs:{content:e.$t("msg.files.copyLink"),placement:"top"}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.address,expression:"address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{size:"mini",icon:"el-icon-document-copy"}})],1),e.share.password?a("el-tooltip",{attrs:{content:e.$t("msg.files.copyPassword"),placement:"top"}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.share.password,expression:"share.password",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopyPasswordSuccess,expression:"onCopyPasswordSuccess",arg:"success"}],attrs:{size:"mini",icon:"el-icon-key"}})],1):e._e(),e.share.token?a("el-tooltip",{attrs:{content:e.$t("msg.files.deleteFile"),placement:"top"}},[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",loading:e.deleteLoading},on:{click:e.deleteShare}})],1):e._e()],1)])],1)},y=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{attrs:{width:"20"}},[a("i",{staticClass:"el-icon-document",staticStyle:{"vertical-align":"middle"}})])}],x=(a("6b54"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return this.ttl?a("span",[e._v(e._s(e.$t("msg.expireTip.normal",{ttl:(0==e.duration.day?"":e.duration.day+e.$t("msg.durationUnit.day"))+(0==e.duration.hour?"":e.duration.hour+e.$t("msg.durationUnit.hour"))+e.duration.minute+e.$t("msg.durationUnit.minute")})))]):a("span",[e._v(e._s(e.$t("msg.expireTip.neverExpire")))])}),b=[],S=(a("c5f6"),{props:{ttl:{type:Number}},computed:{duration:function(){return this.getDuration(this.ttl)}},methods:{getDuration:function(e){var t={day:0,hour:0,minute:0};return e>864e5&&(t.day=parseInt(e/864e5),e%=864e5),e>36e5&&(t.hour=parseInt(e/36e5),e%=36e5),e>6e4&&(t.minute=parseInt(e/6e4)),t}}}),k=S,_=Object(d["a"])(k,x,b,!1,null,null,null),$=_.exports,C=a("5118"),L={props:{share:{type:Object},onRemoved:{type:Function,required:!0}},components:{humanReadableDuration:$},data:function(){return{address:window.location.href+("/"==this.$route.path?this.share.id:""),syncSharePolling:null,countdown:null,deleteLoading:!1}},created:function(){this.syncShare(),this.syncSharePolling=Object(C["setInterval"])(this.syncShare,12e4)},destroyed:function(){Object(C["clearInterval"])(this.syncSharePolling)},methods:{onCopySuccess:function(){this.$message.success(this.$t("msg.files.linkCopied"))},onCopyPasswordSuccess:function(){this.$message.success(this.$t("msg.files.passwordCopied"))},syncShare:function(){var e=this;this.countdown&&Object(C["clearInterval"])(this.countdown),r.a.get("/api/shares/".concat(this.share.id)).then(function(t){e.share.ttl=t.data.ttl,e.share.files=t.data.files,e.share.ttl&&(e.countdown=Object(C["setInterval"])(e.refreshTtl,1e4))}).catch(function(t){404==t.response.data.status?e.onRemoved(e.share):e.$message.error(t.response.data.message?t.response.data.message:t.toString())})},refreshTtl:function(){this.share.ttl-=1e4},deleteShare:function(){var e=this;this.deleteLoading=!0,this.$confirm(this.$t("msg.files.confirmDelete"),{type:"warning",confirmButtonText:this.$t("msg.files.okButton"),cancelButtonText:this.$t("msg.files.cancelButton")}).then(function(){r.a.delete("/api/shares/".concat(e.share.id),{headers:{token:e.share.token}}).then(function(){e.onRemoved(e.share)}).catch(function(t){e.$message.error(t.response.data.message?t.response.data.message:t.toString())}).finally(function(){e.deleteLoading=!1})}).catch(function(){e.deleteLoading=!1})},humanReadableDataSize:function(e){var t;return t=e>1099511627776?(e/1099511627776).toFixed(1)+"TB":e>1073741824?(e/1073741824).toFixed(1)+"GB":e>1048576?(e/1048576).toFixed(1)+"MB":e>1024?(e/1024).toFixed(1)+"KB":e.toFixed(0)+"Bytes",t}}},P=L,z=Object(d["a"])(P,w,y,!1,null,null,null),B=z.exports,F={components:{files:B,humanReadableDuration:$},data:function(){return{isChooseUpload:!1,share:null,uploadPercentage:0,uploadStatus:null,speed:null,lastLoaded:0,lastLoadTime:null,config:null,ttl:null,uploadedList:null,fileList:null,passwordEnabled:!1,password:null,showPassword:!1,errorMsg:null,cancelToken:null}},computed:{address:function(){return window.location.href+this.share.id}},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$loading(),e.prev=1,e.delegateYield(regeneratorRuntime.mark(function e(){var t,a,n,i,o,l,c,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.a.get("/api/config").then(function(e){s.config=e.data;var t=!0,a=!1,n=void 0;try{for(var i,o=s.config.share.ttlOptions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;r.defaultOption&&(s.ttl=r.value)}}catch(l){a=!0,n=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}s.ttl||(s.ttl=s.config.share.ttlOptions[0].value)}).catch(function(e){s.errorMsg=e.response.data.message||e});case 2:if(!s.errorMsg){e.next=4;break}return e.abrupt("return",{v:void 0});case 4:t=null==localStorage.getItem("uploaded")?[]:JSON.parse(localStorage.getItem("uploaded")),a=[],n=!0,i=!1,o=void 0,e.prev=9,l=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=d.value,e.next=3,r.a.post("/api/shares/authorize",t).then(function(){a.push(t)});case 3:case"end":return e.stop()}},e)}),c=t[Symbol.iterator]();case 12:if(n=(d=c.next()).done){e.next=17;break}return e.delegateYield(l(),"t0",14);case 14:n=!0,e.next=12;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e["catch"](9),i=!0,o=e.t1;case 23:e.prev=23,e.prev=24,n||null==c.return||c.return();case 26:if(e.prev=26,!i){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:if(s.uploadedList=a,s.save(),!s.errorMsg){e.next=35;break}return e.abrupt("return",{v:void 0});case 35:case"end":return e.stop()}},e,null,[[9,19,23,31],[24,,26,30]])})(),"t0",3);case 3:if(a=e.t0,"object"!==Object(f["a"])(a)){e.next=6;break}return e.abrupt("return",a.v);case 6:return e.prev=6,t.close(),e.finish(6);case 9:case"end":return e.stop()}},e,this,[[1,,6,9]])}));function t(){return e.apply(this,arguments)}return t}(),methods:{submitUpload:function(){var e=this,t=new FormData;t.append("ttl",this.ttl),this.passwordEnabled&&this.password&&t.append("password",this.password);var a=0,s=!0,n=!1,i=void 0;try{for(var o,l=this.fileList[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var c=o.value;a+=c.size,t.append("file",c.raw)}}catch(u){n=!0,i=u}finally{try{s||null==l.return||l.return()}finally{if(n)throw i}}var d=this.util.parseDataSize(this.config.share.maxFileSize);a<d?(this.cancelToken=r.a.CancelToken.source(),r.a.post("/api/shares",t,{onUploadProgress:this.showProgress,cancelToken:this.cancelToken.token}).then(function(t){e.handleSuccess(t.data)}).catch(function(t){e.handleError(t)}),this.isChooseUpload=!0):this.$message.error(this.$t("msg.message.fileTooBig",{size:this.config.share.maxFileSize}))},cancelUpload:function(){this.cancelToken&&this.cancelToken.cancel()},onChange:function(e,t){this.fileList=t},handleSuccess:function(e){this.$message.success(this.$t("msg.message.uploadSuccess")),this.isSuccess=!0,this.share=e,this.uploadStatus="success",this.speed=null,this.uploadedList.unshift(this.share),this.save()},handleError:function(e){r.a.isCancel(e)?this.backToHome():(this.$message.error(this.$t("msg.message.uploadFail",{errMsg:e.response.data.message||e})),this.errorMsg=e.response.data.message||e,this.uploadStatus="exception")},showProgress:function(e){this.uploadPercentage=parseInt(100*e.loaded/e.total);var t=(new Date).getTime(),a=(t-this.lastLoadTime)/1e3;if(a>1){var s=e.loaded-this.lastLoaded;this.lastLoaded=e.loaded,this.lastLoadTime=t;var n=s/a;this.speed=n>1073741824?(n/1073741824).toFixed(1)+" GB/s":n>1048576?(n/1048576).toFixed(1)+" MB/s":n>1024?(n/1024).toFixed(1)+" KB/s":n.toFixed(0)+" B/s"}},onCopySuccess:function(){this.$message.success(this.$t("msg.message.linkCopied"))},backToHome:function(){this.isChooseUpload=!1,this.uploadStatus=null,this.uploadPercentage=0,this.share=null,this.fileList=null,this.passwordEnabled=!1,this.password=null},shareRemoved:function(e){for(var t=-1,a=0;a<this.uploadedList.length;a++){var s=this.uploadedList[a];if(s.id==e.id){t=a;break}}t>-1&&(this.uploadedList.splice(t,1),this.save())},save:function(){var e=JSON.parse(JSON.stringify(this.uploadedList)),t=!0,a=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.ttl=null}}catch(r){a=!0,s=r}finally{try{t||null==i.return||i.return()}finally{if(a)throw s}}localStorage.setItem("uploaded",JSON.stringify(e))}}},O=F,T=(a("41f3"),Object(d["a"])(O,g,m,!1,null,null,null)),U=T.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mycard2-download"},[e.share?a("div",{staticClass:"download-content"},[a("span",[e._v(e._s(e.$t("msg.download.title")))]),a("el-divider"),a("files",{staticClass:"files",attrs:{share:e.share,"on-removed":e.shareRemoved}})],1):e.needPassword?a("div",{staticClass:"download-content"},[a("el-row",{staticStyle:{height:"70px"}}),a("el-row",[a("span",[e._v(e._s(e.$t("msg.download.needPassword")))])]),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticClass:"password-input",attrs:{autofocus:"",type:e.showPassword?"text":"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authorize(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[a("i",{class:"el-input__icon iconfont "+(e.showPassword?"icon-eye-open":"icon-eye-close"),staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function(t){e.showPassword=!e.showPassword}},slot:"suffix"})]),a("el-button",{attrs:{type:"primary"},on:{click:e.authorize}},[e._v(e._s(e.$t("msg.download.unlockButton")))])],1)],1):a("div",{staticClass:"download-content",staticStyle:{margin:"auto",display:"table","text-align":"center"}},[a("p",{staticStyle:{"font-size":"large","vertical-align":"middle",display:"table-cell"}},[e._v(e._s(e.errorMsg))])]),a("div",{staticStyle:{margin:"20px auto"}},[a("el-link",{attrs:{type:"primary"},on:{click:e.gotoUpload}},[e._v(e._s(e.$t("msg.download.gotoUploadLink")))])],1)])])},M=[],I={components:{files:B},data:function(){return{share:null,errorMsg:null,needPassword:!1,password:null,showPassword:!1}},created:function(){this.getShare()},methods:{gotoUpload:function(){this.$router.push("/")},authorize:function(){var e=this;r.a.post("/api/shares/authorize",{id:this.$route.params.shareId,password:this.password}).then(function(){e.getShare()}).catch(function(t){401==t.response.data.status?e.$message.error(e.$t("msg.download.wrongPassword")):e.$message.error(t.response.data.message?t.response.data.message:t)})},getShare:function(){var e=this,t=this.$loading();r.a.get("/api/shares/".concat(this.$route.params.shareId),{}).then(function(t){e.share=t.data,e.needPassword=!1}).catch(function(t){401==t.response.data.status?e.needPassword=!0:e.errorMsg=t.response.data.message||t}).finally(function(){t.close()})},shareRemoved:function(){this.errorMsg=this.$t("msg.download.fileExpired"),this.needPassword=!1,this.share=null}}},j=I,R=(a("27d7"),Object(d["a"])(j,E,M,!1,null,null,null)),D=R.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mycard2"},[this.$root.adminLoggedIn?e.uploadedList?a("transition-group",{attrs:{name:"list"}},e._l(e.uploadedList,function(t){return a("el-card",{key:t.id,staticStyle:{margin:"10px 0px","box-shadow":"0 2px 6px 0 rgba(0, 0, 0, 0.1)"}},[a("files",{attrs:{share:t,"on-removed":e.shareRemoved}})],1)}),1):e._e():a("div",[a("el-row",{staticStyle:{height:"70px"}}),a("el-row",[e._v("\n        "+e._s(e.$t("msg.admin.inputPasswordPrompt"))+"\n      ")]),a("el-row",[a("el-input",{staticClass:"password-input",attrs:{autofocus:"",type:e.showPassword?"text":"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[a("i",{class:"el-input__icon iconfont "+(e.showPassword?"icon-eye-open":"icon-eye-close"),staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:function(t){e.showPassword=!e.showPassword}},slot:"suffix"})]),a("el-button",{attrs:{type:"primary"},on:{click:e.authenticate}},[e._v(e._s(e.$t("msg.admin.authenticateButton")))])],1)],1)],1)])},H=[],W={components:{files:B},data:function(){return{authenticated:!1,errorMsg:null,uploadedList:null,showPassword:!1,password:null}},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.a.get("/api/check_authentication").then(function(){t.authenticated=!0,t.getShares(),t.$root.adminLoggedIn=!0}).catch(function(e){t.authenticated=!1,401!=e.response.data.status&&(t.errorMsg=e.response.data.message||e)});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),methods:{getShares:function(){var e=this;r.a.get("/api/shares").then(function(t){e.uploadedList=t.data})},authenticate:function(){var e=this;r.a.post("/api/login",{password:this.password}).then(function(){e.authenticated=!0,e.getShares(),e.$root.adminLoggedIn=!0,e.password=null}).catch(function(t){401==t.response.data.status?e.$message.error("密码错误"):e.$message.error(t.response.data.message||t)})},shareRemoved:function(e){for(var t=-1,a=0;a<this.uploadedList.length;a++){var s=this.uploadedList[a];if(s.id==e.id){t=a;break}}t>-1&&this.uploadedList.splice(t,1)}}},J=W,K=(a("2b21"),Object(d["a"])(J,N,H,!1,null,null,null)),G=K.exports;s["default"].use(h["a"]);var Y=new h["a"]({routes:[{path:"/",component:U},{path:"/admin",component:G},{path:"/:shareId",component:D}]}),A=a("4eb5"),q=a.n(A),Q=a("a925"),V=a("5c96"),X=a.n(V),Z=(a("0fae"),a("aef6"),{parseDataSize:function(e){var t;return e.endsWith("TB")?t=1024*parseInt(e.slice(0,e.length-2).trim())*1024*1024*1024:e.endsWith("GB")?t=1024*parseInt(e.slice(0,e.length-2).trim())*1024*1024:e.endsWith("MB")?t=1024*parseInt(e.slice(0,e.length-2).trim())*1024:e.endsWith("KB")?t=1024*parseInt(e.slice(0,e.length-2).trim()):e.endsWith("B")&&(t=parseInt(e.slice(0,e.length-1).trim())),t}});a("ed2c");s["default"].use(Q["a"]),s["default"].config.productionTip=!1,s["default"].use(X.a),s["default"].use(q.a),s["default"].prototype.util=Z;var ee=new Q["a"]({locale:navigator.language||navigator.userLanguage,messages:{"zh-CN":a("9df6"),"en-US":a("3fab")}});new s["default"]({router:Y,data:function(){return{adminLoggedIn:null}},render:function(e){return e(p)},i18n:ee}).$mount("#app")},"64a9":function(e,t,a){},"9df6":function(e,t,a){"use strict";a.r(t),a.d(t,"msg",function(){return s});var s={languageName:"中文",logout:"退出",upload:{dragFile:{1:"将文件拖到此处，或",2:"点击添加文件"},tip:{normal:"可上传{size}以内的文件",anySize:"可上传任意大小的文件"},expire:"后过期",enablePassword:"密码保护",uploadButton:"上传",cancel:"取消"},uploaded:{downloadLink:"下载链接：",copyLinkButton:"复制链接",tip:"复制链接，粘贴到浏览器地址栏中，并打开页面",backToHomeLink:"再次上传"},message:{uploading:"正在上传，成功后生成下载链接。。。",uploadSuccess:"上传成功",uploadFail:"上传失败。{errMsg}",fileTooBig:"文件过大，不能超过{size}",linkCopied:"链接已复制"},expireTip:{normal:"文件将于{ttl}后过期",neverExpire:"文件永不过期"},durationUnit:{day:"天",hour:"小时",minute:"分钟",D:"天",H:"小时",M:"分钟"},download:{title:"文件（点击文件名下载）",needPassword:"文件已加密，请输入密码",unlockButton:"解锁",gotoUploadLink:"使用SendFile共享文件",fileExpired:"文件已过期",wrongPassword:"密码错误"},files:{copyLink:"复制链接",copyPassword:"复制密码",deleteFile:"删除文件",linkCopied:"链接已复制",passwordCopied:"密码已复制",confirmDelete:"确定删除文件共享？",okButton:"确定",cancelButton:"取消"},admin:{authenticateButton:"验证",inputPasswordPrompt:"请输入管理员密码"}}},bd16:function(e,t,a){},e145:function(e,t,a){},ed2c:function(e,t,a){}});
//# sourceMappingURL=app.2f95cf93.js.map