(function(e){function t(t){for(var s,r,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)r=o[d],n[r]&&p.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/ui/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("64a9"),n=a.n(s);n.a},"41f3":function(e,t,a){"use strict";var s=a("bd16"),n=a.n(s);n.a},4805:function(e,t,a){"use strict";var s=a("897e"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e._m(0),a("router-view")],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticStyle:{"font-size":"60px","font-weight":"bold",color:"#606266"}},[a("i",{staticClass:"el-icon-s-promotion",staticStyle:{"margin-right":"20px"}}),e._v("SeNDFile")])])}],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    For a guide and recipes on how to configure / customize this project,"),a("br"),e._v("\n    check out the\n    "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],l={name:"HelloWorld",props:{msg:String}},c=l,u=(a("4805"),a("2877")),d=Object(u["a"])(c,r,o,!1,null,"b9167eee",null),p=d.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"mycard",staticStyle:{width:"400px"}},[e.isChooseUpload?a("div",[a("el-progress",{attrs:{type:"circle","stroke-width":18,percentage:e.uploadPercentage,status:e.uploadStatus}}),a("div",{staticStyle:{height:"20px","line-height":"20px"}},[a("span",{staticStyle:{"font-size":"x-small"}},[e._v(e._s(e.speed))])]),e.share?a("div",{staticStyle:{"text-align":"left"}},[e.shareTTL?a("span",{staticStyle:{"font-size":"x-small"}},[e._v("文件将在"+e._s(e.shareTTL)+"天后过期")]):e._e(),a("div",{staticStyle:{margin:"20px 5px"}},[a("el-row",[e._v("下载链接：")]),a("el-input",{staticStyle:{"min-width":"350px"},attrs:{value:e.address}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.address,expression:"address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{slot:"append",type:"primary",size:"mini"},slot:"append"},[e._v("复制链接")])],1),a("el-row",{staticStyle:{"font-size":"xx-small"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"5px"}}),e._v("复制链接地址，粘贴到浏览器地址栏中，并打开页面")])],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-link",{attrs:{type:"primary"},on:{click:e.backToHome}},[e._v("再次上传")])],1)]):a("div",{staticStyle:{margin:"50px 5px"}},[a("span",[e._v("正在上传，成功后生成下载链接。。。")])])],1):a("div",[a("el-upload",{ref:"upload",staticStyle:{"text-align":"left","min-height":"310px"},attrs:{drag:"",action:"","show-file-list":!0,"auto-upload":!1,multiple:!0,"on-change":e.onChange}},[a("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"67px",color:"#C0C4CC",margin:"40px 0 16px","line-height":"50px"}}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击添加文件")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("可上传"),e.maxFileSize>0?a("span",[e._v(e._s(this.maxFileSize)+"MB")]):a("span",[e._v("任意大小")]),e._v("的文件。"),e.shareTTL>0?a("span",[e._v("有效期"+e._s(this.shareTTL)+"天")]):a("span",[e._v("永久有效")])])]),a("el-button",{staticStyle:{width:"100%",margin:"15px 0px 0px 0px",bottom:"0px"},attrs:{type:"success",icon:"el-icon-upload",disabled:null===e.fileList},on:{click:e.submitUpload}},[e._v("上传")])],1)]),a("transition",[e.uploadedList.length>0?a("el-card",{staticClass:"mycard",staticStyle:{width:"440px"}},[a("transition-group",{attrs:{name:"list"}},e._l(e.uploadedList,function(t){return a("el-card",{key:t.id,staticStyle:{margin:"10px 0px"}},[a("files",{attrs:{share:t,"on-removed":e.shareRemoved,deletable:!0}})],1)}),1)],1):e._e()],1)],1)},f=[],v=(a("ac4d"),a("8a81"),a("ac6a"),a("bc3a")),m=a.n(v),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.share.files,function(t,s){return a("el-row",{key:s},[a("div",{staticStyle:{display:"inline-block",float:"left"}},[a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("el-link",{staticStyle:{"vertical-align":"middle","font-size":"medium",margin:"0px"},attrs:{href:"/api/shares/"+e.share.id+"/"+t.name,icon:"el-icon-document"}},[a("div",{staticStyle:{"max-width":"280px","text-align":"left",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[e._v(e._s(t.name))])])],1)],1),a("div",{staticStyle:{display:"inline-block",float:"right"}},[a("span",{staticStyle:{"vertical-align":"middle","font-size":"x-small"}},[e._v(e._s(e.humanReadableDataSize(t.size)))])])])}),a("div",{staticClass:"el-divider el-divider--horizontal",staticStyle:{margin:"10px 0px"}}),a("el-row",[a("div",{staticStyle:{display:"inline-block",float:"left","text-align":"left"}},[a("el-row",[e.share.ttl?a("span",{staticStyle:{"vertical-align":"middle","font-size":"xx-small"}},[e._v("文件将于 "+e._s(e.humanreadableDuration(e.share.ttl))+" 过期")]):e._e()])],1),a("div",{staticStyle:{display:"inline-block",float:"right"}},[a("el-tooltip",{attrs:{content:"复制链接",placement:"top"}},[a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.address,expression:"address",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"}],attrs:{size:"mini",icon:"el-icon-document-copy"}})],1),e.deletable?a("el-tooltip",{attrs:{content:"删除文件",placement:"top"}},[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",loading:e.deleteLoading},on:{click:e.deleteShare}})],1):e._e()],1)])],2)},_=[],y=a("5118"),b={props:{share:{type:Object},deletable:{type:Boolean,default:!1},onRemoved:{type:Function,required:!0}},data:function(){return{address:window.location.href+("/"==this.$route.path?this.share.id:""),syncSharePolling:null,countdown:null,deleteLoading:!1}},created:function(){this.syncShare(),this.syncSharePolling=Object(y["setInterval"])(this.syncShare,12e4)},destroyed:function(){Object(y["clearInterval"])(this.syncSharePolling)},methods:{onCopySuccess:function(e){this.$message.success("地址已复制")},syncShare:function(){var e=this;Object(y["clearInterval"])(this.countdown),m.a.get("/api/shares/".concat(this.share.id)).then(function(t){e.share.ttl=t.data.ttl,e.share.files=t.data.files,e.countdown=Object(y["setInterval"])(e.refreshTtl,1e4)}).catch(function(t){404==t.response.status?e.onRemoved(e.share):e.$message.error({message:"<p>"+t.response.status+"-"+t.response.statusText+"</p><p>"+t.response.data+"</p>",dangerouslyUseHTMLString:!0})})},refreshTtl:function(){this.share.ttl-=1e4},deleteShare:function(){var e=this;this.deleteLoading=!0,this.$confirm("确定删除文件共享？",{type:"warning"}).then(function(){m.a.delete("/api/shares/".concat(e.share.id),{headers:{token:e.share.token}}).then(function(t){e.onRemoved(e.share)}).finally(function(t){e.deleteLoading=!1})}).catch(function(){}).finally(function(){e.deleteLoading=!1})},humanReadableDataSize:function(e){var t;return t=e>1099511627776?(e/1099511627776).toFixed(1)+"TB":e>1073741824?(e/1073741824).toFixed(1)+"GB":e>1048576?(e/1048576).toFixed(1)+"MB":e>1024?(e/1024).toFixed(1)+"KB":e.toFixed(0)+"Bytes",t},humanreadableDuration:function(e){var t="";return e>864e5&&(t+=parseInt(e/864e5)+"天",e%=864e5),e>36e5&&(t+=parseInt(e/36e5)+"小时",e%=36e5),e>6e4&&(t+=parseInt(e/6e4)+"分钟"),""==t?t="1分钟内":t+="后",t}}},x=b,S=Object(u["a"])(x,g,_,!1,null,null,null),w=S.exports,k={components:{files:w},data:function(){return{isChooseUpload:!1,share:null,uploadPercentage:0,uploadStatus:null,speed:null,lastLoaded:0,lastLoadTime:null,shareTTL:null,maxFileSize:null,uploadedList:null==localStorage.getItem("uploaded")?[]:JSON.parse(localStorage.getItem("uploaded")),fileList:null}},computed:{address:function(){return window.location.href+this.share.id}},created:function(){var e=this;m.a.get("/api/config").then(function(t){e.shareTTL=t.data.shareTTL,e.maxFileSize=t.data.maxFileSize}).catch(function(t){e.$message.error({message:"<p>"+t.response.status+"-"+t.response.statusText+"</p><p>"+t.response.data+"</p>",dangerouslyUseHTMLString:!0})})},methods:{submitUpload:function(){var e=this,t=new FormData,a=!0,s=!1,n=void 0;try{for(var i,r=this.fileList[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var o=i.value;t.append("file",o.raw)}}catch(l){s=!0,n=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}m.a.post("/api/shares",t,{onUploadProgress:this.showProgress}).then(function(t){e.handleSuccess(t.data)}).catch(function(e){}),this.isChooseUpload=!0},onChange:function(e,t){this.fileList=t},handleSuccess:function(e){this.$message.success("上传成功"),this.isSuccess=!0,this.share=e,this.uploadStatus="success",this.speed=null,this.uploadedList.unshift(this.share),this.save()},handleError:function(e){var t=JSON.parse(e.message);this.$message.error("上传失败。"+t.message),this.uploadStatus="exception"},showProgress:function(e){this.uploadPercentage=parseInt(100*e.loaded/e.total);var t=(new Date).getTime(),a=(t-this.lastLoadTime)/1e3;if(a>1){var s=e.loaded-this.lastLoaded;this.lastLoaded=e.loaded,this.lastLoadTime=t;var n=s/a;this.speed=n>1073741824?(n/1073741824).toFixed(1)+" GB/s":n>1048576?(n/1048576).toFixed(1)+" MB/s":n>1024?(n/1024).toFixed(1)+" KB/s":n.toFixed(0)+" B/s"}},handleRemove:function(){return!1},chooseUpload:function(e){if(this.maxFileSize>0&&e.size>1024*this.maxFileSize*1024)return this.$message.error("文件过大，不能超过"+this.maxFileSize+"MB"),!1;this.isChooseUpload=!0,this.isChooseDownload=!1,this.lastLoadTime=(new Date).getTime()},onCopySuccess:function(){this.$message.success("地址已复制")},backToHome:function(){this.isChooseUpload=!1,this.uploadStatus=null,this.uploadPercentage=0,this.share=null,this.fileList=null},shareRemoved:function(e){for(var t=-1,a=0;a<this.uploadedList.length;a++){var s=this.uploadedList[a];if(s.id==e.id){t=a;break}}t>-1&&(this.uploadedList.splice(t,1),this.save())},save:function(){var e=JSON.parse(JSON.stringify(this.uploadedList)),t=!0,a=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var r=n.value;r.ttl=null}}catch(o){a=!0,s=o}finally{try{t||null==i.return||i.return()}finally{if(a)throw s}}localStorage.setItem("uploaded",JSON.stringify(e))}}},L=k,T=(a("41f3"),Object(u["a"])(L,h,f,!1,null,null,null)),j=T.exports,C={name:"app",components:{HelloWorld:p,Upload:j}},z=C,O=(a("034f"),Object(u["a"])(z,n,i,!1,null,null,null)),F=O.exports,$=a("8c4f"),P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticStyle:{width:"400px",height:"400px",display:"inline-block",margin:"10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      文件（点击文件名下载）\n    ")]),a("div",{staticStyle:{height:"300px",position:"relative"}},[e.loading?a("div",[a("p",[e._v("正在读取文件...")])]):a("div",[e.response?a("files",{attrs:{share:e.response,"on-removed":e.shareRemoved}}):a("div",[a("p",[e._v(e._s(e.errorMsg))])])],1),a("div",{staticStyle:{position:"absolute",bottom:"0px",width:"100%"}},[a("el-link",{attrs:{type:"primary"},on:{click:e.gotoUpload}},[e._v("使用SendFile共享文件")])],1)])])],1)},I=[],M={components:{files:w},data:function(){return{response:null,loading:!0,errorMsg:null}},methods:{shareRemoved:function(e){this.errorMsg="文件已过期",this.response=null},gotoUpload:function(){this.$router.push("/")}},created:function(){console.log(this.$route);var e=this;m.a.get("/api/shares/".concat(this.$route.params.shareId)).then(function(t){e.response=t.data},function(t){e.errorMsg=t.response.data.message}).finally(function(){e.loading=!1})}},U=M,E=Object(u["a"])(U,P,I,!1,null,null,null),B=E.exports;s["default"].use($["a"]);var N=new $["a"]({routes:[{path:"/",component:j},{path:"/:shareId",component:B}]}),D=a("4eb5"),R=a.n(D),J=a("5c96"),H=a.n(J);a("0fae");s["default"].config.productionTip=!1,s["default"].use(H.a),s["default"].use(R.a),new s["default"]({router:N,render:function(e){return e(F)}}).$mount("#app")},"64a9":function(e,t,a){},"897e":function(e,t,a){},bd16:function(e,t,a){}});
//# sourceMappingURL=app.0f9310b9.js.map